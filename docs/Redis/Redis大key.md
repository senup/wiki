---
title: Redis大key
date: 2023-12-27 10:36:57
Tags:
  - tech
Draft: true
HideInList: false
Feature: 
IsTop: false
---
## 定义
一个 Key 如果超过了 1MB 的大小，或者列表、集合、哈希等数据类型的元素数量超过了 5000 个，那么就可以被视为大 Key。

大 Key 的存在会对 Redis 的性能和稳定性产生一定影响，例如可能导致 Redis 阻塞、延时升高等问题。

因此，在实际使用过程中，我们需要避免产生大 Key，或者定期检查和清理大 Key。


## 优化实践
1. 首要原则：由于 Redis 是单线程处理模型，我们需要尽可能减少大 Key 对整体性能的影响。
2. 利用机制：利用 Redis 缓存可以有效缓解数据库层面的压力，避免短时间内大量的数据库访问请求。
3. 过期设置：所有存储在Redis中的Key都应设置过期时间，避免不必要的内存浪费，同时防止一些旧数据长期堆积导致的性能问题。
4. 数据结构：合理使用Redis提供的五种数据结构（String, List, Set, Hash, Zset），根据具体业务需求选择最合适的数据类型。
5. 大Key处理：如果预计某个Key可能会很大，根据业务需要适当拆分。例如，可以按提供商、月份或日期等方式进行拆分。

<!--more-->
