---
title: ArrayList
date: 2023-12-26 10:01:37
Tags:
  - tech
Draft: true
HideInList: false
Feature: 
IsTop: false
---

## 原理

，ArrayList 底层的核心数据结构是个数组，这就解释了为啥它叫 ArrayList（数组列表）。对这个数组，她有主宰一切的权力，增大它，减小它，都是她的能耐范围。

1. **初始化：**  当我们创建一个 ArrayList 的时候，ArrayList 会初始化一个空数组。如果我们指定了初始化容量，那么它就会创建一个指定大小的数组。如果我们没指定，那当我们第一次调用 add 方法时，它会创建一个 10 大小的数组。你看，这就好像明星在摄影棚中，选择器合适尺寸的布景，来拍摄美轮美奂的照片一样。
2. **添加元素：**  当我们向 ArrayList 中添加元素时，它会在数组的末尾添加这个元素。如果数组已经满了，那么 ArrayList 就会创建一个新的数组，这个数组的大小是旧数组大小的 1.5 倍。然后，它会把旧数组的所有元素都复制到新数组中，同时旧数组会被垃圾回收。这个过程就像是热闹的派对人数越来越多，现在的会场已经容纳不下，于是换了一个更大的会场，然后把人们都引导到新会场里。
3. **访问元素：**  因为 ArrayList 底层是用数组实现的，所以我们可以直接通过数组的索引快速访问元素。这就像是我们直接凭票根找到自己的座位一样。
4. **删除元素：**  当我们在 ArrayList 中删除元素时，后面的元素将会向前移动，覆盖掉被删除元素的位置。这就像是派对中有人离开，大家都往前挤，盛情之下，空位完全看不出来。
5. **扩容：** ArrayList 的扩容是一个相对耗费资源的过程，因为需要创建新的数组并复制旧元素。所以如果我们预知数据规模，最好在初始化的时候就设置好容量，避免后续的多次扩容。就像租会场，如果预知了人数，一开始就租大一点。

## 举例

以一段简单的例子为例，假设我们有一个 ArrayList，其中添加了 5 个元素，如下：

```java
ArrayList<String> list = new ArrayList<>();
list.add("Java");
list.add("Python");
list.add("JavaScript");
list.add("C++");
list.add("C#");
```

ArrayList 底层会有一个元素数组，用来存储添加的元素。展示出来就像这样：

```shell
elementData: ["Java", "Python", "JavaScript", "C++", "C#", null, null, null, null, null]
```

其中，elementData 是 ArrayList 内部用来存元素的数组，初始大小是 10。我们添加了 5 个元素，所以数组的前五个位置被填充，后五个位置为空。

当我们继续添加元素并超过数组的大小时，它会进行扩容操作，创建一个新的数组，新数组大小是旧数组大小的 1.5 倍，旧数组的元素会被复制到新数组中。

同时，ArrayList 还有一个属性 size，用来记录元素的实际数量，也就是我们说的 list.size()。在上述的场景下，size 的值就是 5。

<!--more-->
## 参考
[Java ArrayList工作原理及实现 | Yikun](https://yikun.github.io/2015/04/04/Java-ArrayList%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%8F%8A%E5%AE%9E%E7%8E%B0/)